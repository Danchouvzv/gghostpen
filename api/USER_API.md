# üë§ User API - –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏

## üéØ –û–±–∑–æ—Ä

–¢–µ–ø–µ—Ä—å GhostPen –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**! –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç:
1. –î–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –ø–æ—Å—Ç—ã
2. –ü–æ—Å—Ç—Ä–æ–∏—Ç—å —Å–≤–æ–π —Å—Ç–∏–ª–µ–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å
3. –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å—Ç—ã –≤ —Å–≤–æ—ë–º —Å—Ç–∏–ª–µ

---

## üìù Endpoints

### 1. –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```http
POST /api/users
Content-Type: application/json

{
  "email": "user@example.com",  // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤"          // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "user_id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "created"
}
```

---

### 2. –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

```http
GET /api/users/{user_id}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "email": "user@example.com",
  "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "created_at": "2024-01-01T10:00:00"
}
```

---

### 3. –î–æ–±–∞–≤–∏—Ç—å –ø–æ—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```http
POST /api/users/{user_id}/posts
Content-Type: application/json

{
  "platform": "linkedin",
  "content": "–°–µ–≥–æ–¥–Ω—è —Ö–æ—á—É –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –º—ã—Å–ª—è–º–∏ –æ –≤–∞–∂–Ω–æ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Ä–∞–±–æ—Ç—ã...",
  "timestamp": "2024-01-01T10:00:00Z",  // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  "hashtags": ["#leadership", "#teamwork"],  // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  "mentions": [],  // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  "emojis": ["üî•"]  // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "post_id": "660e8400-e29b-41d4-a716-446655440000",
  "status": "created"
}
```

---

### 4. –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```http
GET /api/users/{user_id}/posts?platform=linkedin
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `platform` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - —Ñ–∏–ª—å—Ç—Ä –ø–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ

**–û—Ç–≤–µ—Ç:**
```json
{
  "posts": [
    {
      "id": "660e8400-e29b-41d4-a716-446655440000",
      "user_id": "550e8400-e29b-41d4-a716-446655440000",
      "platform": "linkedin",
      "content": "–°–µ–≥–æ–¥–Ω—è —Ö–æ—á—É –ø–æ–¥–µ–ª–∏—Ç—å—Å—è...",
      "timestamp": "2024-01-01T10:00:00Z",
      "hashtags": ["#leadership"],
      "mentions": [],
      "emojis": ["üî•"]
    }
  ],
  "count": 1
}
```

---

### 5. –£–¥–∞–ª–∏—Ç—å –ø–æ—Å—Ç

```http
DELETE /api/users/{user_id}/posts/{post_id}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "deleted"
}
```

---

### 6. –ü–µ—Ä–µ—Å—Ç—Ä–æ–∏—Ç—å —Å—Ç–∏–ª–µ–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å

```http
POST /api/users/{user_id}/rebuild-profile
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ –ø–æ—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°—Ç—Ä–æ–∏—Ç —Å—Ç–∏–ª–µ–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å —á–µ—Ä–µ–∑ StyleProfiler
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å –≤ –ë–î

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "success",
  "profile": {
    "author_id": "user_550e8400...",
    "style": {
      "avg_post_length": 300,
      "tone": {...},
      ...
    }
  },
  "total_posts": 15
}
```

---

### 7. –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∏–ª–µ–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å

```http
GET /api/users/{user_id}/profile
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "author_id": "user_550e8400...",
  "style": {
    "avg_post_length": 300,
    "tone": {
      "dominant": "formal",
      "formal": 13.39,
      ...
    },
    ...
  }
}
```

---

### 8. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–∞ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)

–¢–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `user_id`:

```http
POST /api/generate
Content-Type: application/json

{
  "user_id": "550e8400-e29b-41d4-a716-446655440000",  // –≤–º–µ—Å—Ç–æ author_id
  "social_network": "linkedin",
  "topic": "–û –≤–∞–∂–Ω–æ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Ä–∞–±–æ—Ç—ã"
}
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ–º–æ-–∞–≤—Ç–æ—Ä–æ–≤:

```http
POST /api/generate
Content-Type: application/json

{
  "author_id": "person_01",  // –¥–µ–º–æ-–∞–≤—Ç–æ—Ä
  "social_network": "linkedin",
  "topic": "–û –≤–∞–∂–Ω–æ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Ä–∞–±–æ—Ç—ã"
}
```

---

## üöÄ Workflow

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```bash
curl -X POST http://localhost:8000/api/users \
  -H "Content-Type: application/json" \
  -d '{"name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤"}'
```

### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å –ø–æ—Å—Ç—ã
```bash
curl -X POST http://localhost:8000/api/users/{user_id}/posts \
  -H "Content-Type: application/json" \
  -d '{
    "platform": "linkedin",
    "content": "–ú–æ–π –ø–µ—Ä–≤—ã–π –ø–æ—Å—Ç..."
  }'
```

### –®–∞–≥ 3: –ü–µ—Ä–µ—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
```bash
curl -X POST http://localhost:8000/api/users/{user_id}/rebuild-profile
```

### –®–∞–≥ 4: –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å—Ç—ã
```bash
curl -X POST http://localhost:8000/api/generate \
  -H "Content-Type: application/json" \
  -d '{
    "user_id": "{user_id}",
    "social_network": "linkedin",
    "topic": "–û –≤–∞–∂–Ω–æ—Å—Ç–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è"
  }'
```

---

## üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

SQLite –±–∞–∑–∞ `ghostpen.db` —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ.

**–¢–∞–±–ª–∏—Ü—ã:**
- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `user_posts` - –ø–æ—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `user_profiles` - —Å—Ç–∏–ª–µ–≤—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### Python

```python
import requests

BASE_URL = "http://localhost:8000"

# 1. –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
user = requests.post(f"{BASE_URL}/api/users", json={"name": "–ò–≤–∞–Ω"}).json()
user_id = user["user_id"]

# 2. –î–æ–±–∞–≤–∏—Ç—å –ø–æ—Å—Ç—ã
for post_text in my_posts:
    requests.post(
        f"{BASE_URL}/api/users/{user_id}/posts",
        json={
            "platform": "linkedin",
            "content": post_text
        }
    )

# 3. –ü–µ—Ä–µ—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
requests.post(f"{BASE_URL}/api/users/{user_id}/rebuild-profile")

# 4. –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å—Ç
result = requests.post(
    f"{BASE_URL}/api/generate",
    json={
        "user_id": user_id,
        "social_network": "linkedin",
        "topic": "–û –≤–∞–∂–Ω–æ—Å—Ç–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è"
    }
).json()

print(result["generated_post"])
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- –ú–∏–Ω–∏–º—É–º **10-15 –ø–æ—Å—Ç–æ–≤** –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
- –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –ø–æ—Å—Ç–æ–≤ –≤—ã–∑—ã–≤–∞–π—Ç–µ `/rebuild-profile`
- –ü—Ä–æ—Ñ–∏–ª—å –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Å–µ—Ö –ø–æ—Å—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## üîú –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- OAuth –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–æ—Ü—Å–µ—Ç—è–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –ø–æ—Å—Ç–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –ø—Ä–æ—Ñ–∏–ª–µ–π

